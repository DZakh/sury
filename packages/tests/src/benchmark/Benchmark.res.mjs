// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Benchmark from "benchmark";
import * as Core__Array from "@rescript/core/src/Core__Array.res.mjs";
import * as S$RescriptSchema from "rescript-schema/src/S.res.mjs";

function addWithPrepare(suite, name, fn) {
  return suite.add(name, fn());
}

function run(suite) {
  suite.on("cycle", (function ($$event) {
            console.log($$event.target.toString());
          })).run();
}

function makeTestObject() {
  return (Object.freeze({
    number: 1,
    negNumber: -1,
    maxNumber: Number.MAX_VALUE,
    string: 'string',
    longString:
      'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Vivendum intellegat et qui, ei denique consequuntur vix. Semper aeterno percipit ut his, sea ex utinam referrentur repudiandae. No epicuri hendrerit consetetur sit, sit dicta adipiscing ex, in facete detracto deterruisset duo. Quot populo ad qui. Sit fugit nostrum et. Ad per diam dicant interesset, lorem iusto sensibus ut sed. No dicam aperiam vis. Pri posse graeco definitiones cu, id eam populo quaestio adipiscing, usu quod malorum te. Ex nam agam veri, dicunt efficiantur ad qui, ad legere adversarium sit. Commune platonem mel id, brute adipiscing duo an. Vivendum intellegat et qui, ei denique consequuntur vix. Offendit eleifend moderatius ex vix, quem odio mazim et qui, purto expetendis cotidieque quo cu, veri persius vituperata ei nec. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.',
    boolean: true,
    deeplyNested: {
      foo: 'bar',
      num: 1,
      bool: false,
    },
  }));
}

function makeAdvancedObjectSchema() {
  return S$RescriptSchema.object(function (s) {
              return {
                      number: s.f("number", S$RescriptSchema.$$float),
                      negNumber: s.f("negNumber", S$RescriptSchema.$$float),
                      maxNumber: s.f("maxNumber", S$RescriptSchema.$$float),
                      string: s.f("string", S$RescriptSchema.string),
                      longString: s.f("longString", S$RescriptSchema.string),
                      boolean: s.f("boolean", S$RescriptSchema.bool),
                      deeplyNested: s.f("deeplyNested", S$RescriptSchema.object(function (s) {
                                return {
                                        foo: s.f("foo", S$RescriptSchema.string),
                                        num: s.f("num", S$RescriptSchema.$$float),
                                        bool: s.f("bool", S$RescriptSchema.bool)
                                      };
                              }))
                    };
            });
}

function makeObjectSchema() {
  return S$RescriptSchema.schema(function (s) {
              return {
                      number: s.m(S$RescriptSchema.$$float),
                      negNumber: s.m(S$RescriptSchema.$$float),
                      maxNumber: s.m(S$RescriptSchema.$$float),
                      string: s.m(S$RescriptSchema.string),
                      longString: s.m(S$RescriptSchema.string),
                      boolean: s.m(S$RescriptSchema.bool),
                      deeplyNested: {
                        foo: s.m(S$RescriptSchema.string),
                        num: s.m(S$RescriptSchema.$$float),
                        bool: s.m(S$RescriptSchema.bool)
                      }
                    };
            });
}

S$RescriptSchema.setGlobalConfig({
      disableNanNumberValidation: true
    });

var schema = S$RescriptSchema.recursive(function (schema) {
      return S$RescriptSchema.union([
                  S$RescriptSchema.object(function (s) {
                        s.tag("type", "A");
                        return {
                                TAG: "A",
                                _0: s.f("nested", S$RescriptSchema.array(schema))
                              };
                      }),
                  S$RescriptSchema.literal("B"),
                  S$RescriptSchema.literal("C"),
                  S$RescriptSchema.literal("D"),
                  S$RescriptSchema.literal("E"),
                  S$RescriptSchema.literal("F"),
                  S$RescriptSchema.literal("G"),
                  S$RescriptSchema.literal("H"),
                  S$RescriptSchema.literal("I"),
                  S$RescriptSchema.literal("J"),
                  S$RescriptSchema.literal("K"),
                  S$RescriptSchema.literal("L"),
                  S$RescriptSchema.literal("M"),
                  S$RescriptSchema.literal("N"),
                  S$RescriptSchema.literal("O"),
                  S$RescriptSchema.literal("P"),
                  S$RescriptSchema.literal("Q"),
                  S$RescriptSchema.literal("R"),
                  S$RescriptSchema.literal("S"),
                  S$RescriptSchema.literal("T"),
                  S$RescriptSchema.literal("U"),
                  S$RescriptSchema.literal("V"),
                  S$RescriptSchema.literal("W"),
                  S$RescriptSchema.literal("X"),
                  S$RescriptSchema.literal("Y"),
                  S$RescriptSchema.object(function (s) {
                        s.tag("type", "Z");
                        return {
                                TAG: "Z",
                                _0: s.f("nested", S$RescriptSchema.array(schema))
                              };
                      })
                ]);
    });

var testData1 = {
  TAG: "Z",
  _0: Core__Array.make(25, {
        TAG: "Z",
        _0: Core__Array.make(25, {
              TAG: "Z",
              _0: Core__Array.make(25, "Y")
            })
      })
};

var testData2 = {
  TAG: "A",
  _0: Core__Array.make(25, {
        TAG: "A",
        _0: Core__Array.make(25, {
              TAG: "A",
              _0: Core__Array.make(25, "B")
            })
      })
};

function test() {
  console.time("testData1 serialize");
  var json = S$RescriptSchema.reverseConvertOrThrow(testData1, schema);
  console.timeEnd("testData1 serialize");
  console.time("testData1 parse");
  S$RescriptSchema.parseOrThrow(json, schema);
  console.timeEnd("testData1 parse");
  console.time("testData2 serialize");
  var json$1 = S$RescriptSchema.reverseConvertOrThrow(testData2, schema);
  console.timeEnd("testData2 serialize");
  console.time("testData2 parse");
  S$RescriptSchema.parseOrThrow(json$1, schema);
  console.timeEnd("testData2 parse");
}

test();

var data = makeTestObject();

console.time("makeObjectSchema");

var schema$1 = makeObjectSchema();

console.timeEnd("makeObjectSchema");

console.time("parseOrThrow: 1");

S$RescriptSchema.parseOrThrow(data, schema$1);

console.timeEnd("parseOrThrow: 1");

console.time("parseOrThrow: 2");

S$RescriptSchema.parseOrThrow(data, schema$1);

console.timeEnd("parseOrThrow: 2");

console.time("parseOrThrow: 3");

S$RescriptSchema.parseOrThrow(data, schema$1);

console.timeEnd("parseOrThrow: 3");

console.time("serializeWith: 1");

S$RescriptSchema.reverseConvertOrThrow(data, schema$1);

console.timeEnd("serializeWith: 1");

console.time("serializeWith: 2");

S$RescriptSchema.reverseConvertOrThrow(data, schema$1);

console.timeEnd("serializeWith: 2");

console.time("serializeWith: 3");

S$RescriptSchema.reverseConvertOrThrow(data, schema$1);

console.timeEnd("serializeWith: 3");

console.time("S.Error.make");

S$RescriptSchema.$$Error.make({
      TAG: "OperationFailed",
      _0: "Should be positive"
    }, S$RescriptSchema.Flag.typeValidation, S$RescriptSchema.Path.empty);

console.timeEnd("S.Error.make");

run(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(addWithPrepare(new (Benchmark.default.Suite)().add("S.schema - make", (function () {
                                                                              return makeObjectSchema();
                                                                            })), "S.schema - make + parse", (function () {
                                                                          var data = makeTestObject();
                                                                          return function () {
                                                                            var schema = makeObjectSchema();
                                                                            return S$RescriptSchema.parseOrThrow(data, schema);
                                                                          };
                                                                        })), "S.schema - parse", (function () {
                                                                      var schema = makeObjectSchema();
                                                                      var data = makeTestObject();
                                                                      return function () {
                                                                        return S$RescriptSchema.parseOrThrow(data, schema);
                                                                      };
                                                                    })), "S.schema - parse strict", (function () {
                                                                  S$RescriptSchema.setGlobalConfig({
                                                                        defaultAdditionalItems: "strict",
                                                                        disableNanNumberValidation: true
                                                                      });
                                                                  var schema = makeObjectSchema();
                                                                  S$RescriptSchema.setGlobalConfig({
                                                                        disableNanNumberValidation: true
                                                                      });
                                                                  var data = makeTestObject();
                                                                  return function () {
                                                                    return S$RescriptSchema.parseOrThrow(data, schema);
                                                                  };
                                                                })).add("S.schema - make + reverse", (function () {
                                                                return S$RescriptSchema.reverse(makeObjectSchema());
                                                              })), "S.schema - make + reverse convert", (function () {
                                                            var data = makeTestObject();
                                                            return function () {
                                                              var schema = makeObjectSchema();
                                                              return S$RescriptSchema.reverseConvertOrThrow(data, schema);
                                                            };
                                                          })), "S.schema - reverse convert", (function () {
                                                        var schema = makeObjectSchema();
                                                        var data = makeTestObject();
                                                        return function () {
                                                          return S$RescriptSchema.reverseConvertOrThrow(data, schema);
                                                        };
                                                      })), "S.schema - reverse convert (compiled)", (function () {
                                                    var schema = makeObjectSchema();
                                                    var data = makeTestObject();
                                                    var fn = S$RescriptSchema.compile(schema, "Output", "Input", "Sync", false);
                                                    return function () {
                                                      return fn(data);
                                                    };
                                                  })), "S.schema - assert", (function () {
                                                var schema = makeObjectSchema();
                                                var data = makeTestObject();
                                                return function () {
                                                  S$RescriptSchema.assertOrThrow(data, schema);
                                                };
                                              })), "S.schema - assert (compiled)", (function () {
                                            var schema = makeObjectSchema();
                                            var data = makeTestObject();
                                            var assertFn = S$RescriptSchema.compile(schema, "Any", "Assert", "Sync", true);
                                            return function () {
                                              assertFn(data);
                                            };
                                          })), "S.schema - assert strict", (function () {
                                        S$RescriptSchema.setGlobalConfig({
                                              defaultAdditionalItems: "strict",
                                              disableNanNumberValidation: true
                                            });
                                        var schema = makeObjectSchema();
                                        S$RescriptSchema.setGlobalConfig({
                                              disableNanNumberValidation: true
                                            });
                                        var data = makeTestObject();
                                        return function () {
                                          S$RescriptSchema.assertOrThrow(data, schema);
                                        };
                                      })).add("S.object - make", (function () {
                                      return makeAdvancedObjectSchema();
                                    })), "S.object - make + parse", (function () {
                                  var data = makeTestObject();
                                  return function () {
                                    var schema = makeAdvancedObjectSchema();
                                    return S$RescriptSchema.parseOrThrow(data, schema);
                                  };
                                })), "S.object - parse", (function () {
                              var schema = makeAdvancedObjectSchema();
                              var data = makeTestObject();
                              return function () {
                                return S$RescriptSchema.parseOrThrow(data, schema);
                              };
                            })).add("S.object - make + reverse", (function () {
                            return S$RescriptSchema.reverse(makeAdvancedObjectSchema());
                          })), "S.object - make + reverse convert", (function () {
                        var data = makeTestObject();
                        return function () {
                          var schema = makeAdvancedObjectSchema();
                          return S$RescriptSchema.reverseConvertOrThrow(data, schema);
                        };
                      })), "S.object - reverse convert", (function () {
                    var schema = makeAdvancedObjectSchema();
                    var data = makeTestObject();
                    return function () {
                      return S$RescriptSchema.reverseConvertOrThrow(data, schema);
                    };
                  })), "S.string - parse", (function () {
                return function () {
                  return S$RescriptSchema.parseOrThrow("Hello world!", S$RescriptSchema.string);
                };
              })), "S.string - reverse convert", (function () {
            return function () {
              return S$RescriptSchema.reverseConvertOrThrow("Hello world!", S$RescriptSchema.string);
            };
          })));

export {
  
}
/*  Not a pure module */
